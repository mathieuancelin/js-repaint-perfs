/*
 https://github.com/leeoniya/domvm (1.2.4)
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var x=("undefined"==typeof window?{}:window).requestAnimationFrame,y={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},t={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(d){return d instanceof Array},isVal:function(d){d=typeof d;return"string"===d||"number"===d},isObj:function(d){return"object"===typeof d&&null!==d&&!t.isArr(d)},isFunc:function(d){return"function"===typeof d},isProm:function(d){return"object"===typeof d&&t.isFunc(d.then)},isElem:function(d){return d instanceof HTMLElement},execAll:function(d,h,p,q,r,u){var w;d&&(t.isArr(d)?d:[d]).forEach(function(d){w=d.call(null,h,p,q,r,u)});return w},tick:function(d,h){h&&x?x&&x(function(){t.tick(d,
h-1)}):t.isArr(d)?d[0].apply(null,d.slice(1)):d()},insertArr:function(d,h,p,q){d.splice.apply(d,[p,q].concat(h))},isEvProp:function(d){return"on"===d.substr(0,2)},isDynProp:function(d,h){switch(d){case "input":case "textarea":case "select":case "option":switch(h){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(d){return d.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(d,h){return isNaN(h)||y[d]?h:h+"px"},cmpArr:function(d,h){var p=
d.length;if(p!=h.length)return!1;for(;p--;)if(d[p]!==h[p])return!1;return!0},deepSet:function(d,h,p,q,r,u){h=h.split(".");var w=h.pop();h.forEach(function(h){d[h]||(d[h]={});d=d[h]});if(t.isFunc(d[w]))d[w](p,q,r,u);else d[w]=p},deepGet:function(d,h){var p=h.split(".");do d=d[p.shift()];while(p.length);return d},keyedIdx:function(d,h,p,q,r){for(q=0;q<h.length;q++)if(r=h[q],r.key===d)if(p){if(r.vm&&r.vm.view[0]===p)return q}else return q;return-1},raft:function(d){function h(){p=0;d.apply(q,r)}if(!x)return d;
var p,q,r;return function(){q=this;r=arguments;p||(p=x(h))}}};u.utils=t})(domvm);(function(u){function x(){for(var a,b,c=[C,I];b=c.shift();)for(;a=b.shift();)a[0].apply(null,a.slice(1))}function y(a,b){return!1===b?null:null==b&&null!=a?a:f.isVal(b)||f.isObj(b)||f.isArr(b)||f.isFunc(b)?b:null}function t(a,b,c,v,g,e){function l(a,b,e){if(e)a[b]=a[b]||[],a[b].push(e);else for(var c in b)a[c]=a[c]||[],a[c].push(b[c])}function k(a,b,c){g=a;e=b;n.update(c,!1);null!=n.node&&(g.body[e]=n.node);return z(0,!1)}function m(a){return null==a?"":a}function z(a,v){if((v=!1!==v)&&C.length)return I.push([z,
a,v]),n;if(a){for(var d=n;a--&&d.parent;)d=d.parent;d.redraw(0,!0);return d.vm}(d=n.node)&&h(n,"willRedraw",n);var l=n.refs;n.refs={};n.body=[];var k=n.render.call(n.api,n,b,c),m;if(!1===k||(m=r(k,g,e,n,!0))&&J(d,m))return d.moved=!0,d.wasSame=!0,n.refs=l,n;m.vm=n;n.node=m;l=f.isVal(c)&&"^"===c[0]?c.substr(1):f.isVal(m.ref)&&"^"===m.ref[0]?m.ref.substr(1):null;m.key=null!=c?c:m.key;for(k=g;k;)k.vm&&(n.parent||(n.parent=k.vm,k.vm.body.push(n)),null!==l&&f.deepSet(k.vm.refs,l,m)),k=k.parent;if((l=d)&&
(m.type!==d.type||m.tag!==d.tag))var l=null,u=!0,t=d.el.parentNode;w(m,l);g&&(g.body[e]=m);v&&(d&&p(d),!d&&q||B(m,null,m.el),u&&(t||m.parent.el).insertBefore(m.el,t.childNodes[d.idx]));d&&h(n,"didRedraw",n);!1!==v&&f.tick(x,2);return n}var q=!g;f.isArr(a)&&(b=a[1],c=a[2],v=a[3],a=a[0]);c=y(b,c);var n={api:{},node:null,view:[a,c],model:b,opts:v||{},render:null,update:function(a,e){null==a||c===b&&!f.isVal(c)||(b=n.model=a);return!1!==e?z(0):n},on:function(a,b){l(n.events,a,b)},hook:function(a,b){n.hooks=
n.hooks||{};l(n.hooks,a,b)},events:{},hooks:null,redraw:D.useRaf?f.raft(z):z,patch:function(a,b){var e=null!=a.el;if(f.isObj(b)){var c="class"in b?(m(a["class"])+" "+m(b["class"])).trim():a.props["class"],g="style"in b?b.style:a.props.style;e&&(e=Object.create(a.props),e["class"]=c,e.style=g,e={tag:a.tag,el:a.el,ns:a.ns,props:e},E(e,a));a.props["class"]=c;a.props.style=g}else c=a.parent,e=w(r(b,c,a.idx,n),a),c.body[a.idx]=e},emit:function(a){for(var b=Array.prototype.slice.call(arguments),e=n,c;e;){if(c=
e.events[a]){b[0]=c;f.execAll.apply(null,b);break}e=e.parent}},refs:{},parent:null,body:[],mount:function(a,b){var e=null;b&&(a.textContent="",e=a,a=null);B(n.node,e,null,a);return n},attach:function(a){d(n.node,a);return n},unmount:function(){p(n.node)},moveTo:k,updIdx:function(a){e=a}};v&&v.hooks&&n.hook(v.hooks);f.execAll(A,n);n.render=a.call(n.api,n,b,c);return g?k(g,e):z(0)}function d(a,b){a.el=b;b._node=a;for(var c in a.props){var v=a.props[c],g=f.isEvProp(c)?c:"."===c[0]?c.substr(1):null;null!==
g&&(b[g]=v)}if(f.isArr(a.body))for(c=0;c<a.body.length;c++)d(a.body[c],b.childNodes[c])}function h(a,b,c,d,g,e){if(a&&a.hooks&&(a=a.hooks[b]))if(D.useRaf&&"did"==b.substr(0,3))C.push([f.execAll,a,c,d,g,e]);else return f.execAll(a,c,d,g,e)}function p(a,b){var c=a.el&&!a.moved;if(c){var d=h(a.vm,"willUnmount",a.vm),g=h(a,"willRemove",a),e=d||g;a.removed=!0}a.wasSame?a.wasSame=!1:(f.isArr(a.body)&&a.body.forEach(function(a,c){p(a,b||e)}),b||(e?e.then(function(){q(a,c)}):q(a,c)));a.moved=!1}function q(a,
b){null!=a.el&&a.el.parentNode&&(b&&(a.el.parentNode.removeChild(a.el),a.el=null,h(a.vm,"didUnmount",a.vm),h(a,"didRemove",a)),f.isArr(a.body)&&a.body.forEach(function(a,b){q(a,!a.moved)}));F.push(a)}function r(a,b,c,d,g){var e=a;a=0<F.length?F.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};a.el=a.key=a.vm=a.body=a.props=null;a.moved=a.wasSame=a.removed=!1;f.isFunc(e)&&
(e=e());var l=e.length;if(f.isArr(e)&&l){a.type=f.TYPE_ELEM;if(1<l){var k=1;!f.isObj(e[1])||e[1].redraw||f.isElem(e[1])||(a.props=e[1],k=2);a.body=l==k+1?f.isVal(e[k])?e[k]:f.isFunc(e[k])?e[k]():e.slice(k):e.slice(k)}e=e[0];l=K[e];l||(l=["",""],l={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||l)[1],"class":(e.match(/\.([-\w.]+)/)||l)[1].replace(/\./g," ")},K[e]=l);a.tag=l.tag;if(l.id||l["class"])e=a.props||{},l.id&&null==e.id&&(e.id=l.id),l["class"]&&(a["class"]=l["class"],e["class"]=
l["class"]+(null!=e["class"]?" "+e["class"]:"")),a.props=e;if(a.props){var e=a.props,m;for(m in e)!f.isEvProp(m)&&f.isFunc(e[m])&&("href"==m?(e.onclick=e[m],e.href=e[m].href):e[m]=e[m]()),f.isDynProp(a.tag,m)&&(e["."+m]=e[m]);if(f.isObj(e.style))for(var h in e.style)m=e.style[h],f.isFunc(m)&&(e.style[h]=m());f.isObj(e._hooks)&&(a.hooks=e._hooks,e._hooks=null);a.key=f.isVal(e._key)?e._key:f.isVal(e._ref)?e._ref:f.isVal(e.id)?e.id:f.isVal(e.name)?e.name:null;null!=e._ref&&(a.ref=e._ref);e._raw&&(a.raw=
!0);null!=e._data&&(a.data=e._data);e._diff&&(a.diff=e._diff);e._ref=e._key=e._raw=e._data=e._diff=null}}else f.isVal(e)?(a.type=f.TYPE_TEXT,a.body=e):f.isElem(e)&&(a.type=f.TYPE_ELEM,a.el=e,a.tag=e.nodeName.toLowerCase());null!==a.ref&&f.deepSet(d.refs,a.ref,a);a.parent=b;a.idx=c;a.ns=b&&b.ns?b.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;g||a.diff||!f.isArr(a.body)||H(a,d);return a}function H(a,b){for(var c=0,d=a.body.length;c<d;c++){var g=a.body[c],e=null,l=null,k=!1,m=!1;f.isFunc(g)&&(g=g());if(null==
g)k=!0;else{var h=f.isArr(g),p=h?!1:f.isObj(g);if(h)g.length?"string"==typeof g[0]&&""!==g[0]?(l=r(g,a,c,b),e=l.key):f.isFunc(g[0])?e=y(g[1],g[2]):m=!0:k=!0;else if(p)if(f.isFunc(g.redraw))g.moveTo(a,c),l=g.node,e=g.view[1];else if(f.isElem(g))l=r(g,a,c,b);else{a.body[c--]=""+g;continue}else""===g?k=!0:0<c&&a.body[c-1].type===f.TYPE_TEXT?(a.body[c-1].body+=""+g,k=!0):l=r(""+g,a,c,b)}k||m?(m?f.insertArr(a.body,g,c,1):a.body.splice(c,1),d=a.body.length,c--):(null!==e&&(a.hasKeys=!0),a.body[c]=l||g)}a.body._init=
!0}function w(a,b){if(J(b,a))return b.moved=!0,b.wasSame=!0,b;b&&(h(a,"willRecycle",b,a),N(b,a),h(a,"didRecycle",b,a));if(f.isArr(a.body)){if(!a.body._init){for(var c=a;!c.vm;)c=c.parent;H(a,c.vm)}var d=0;a.body.forEach(function(c,e){var l=f.isArr(c);if(b){var k=O(c,a,b,d);if(null!==k){var m=k[0],k=k[1];m===d&&d++;m=b.body[m];m.vm?l?2===k?m.vm.moveTo(a,e,c[1]):1===k&&t(c[0],c[1],c[2],c[3],a,e):c.vm&&2===k&&c.vm===m.vm&&m.vm.moveTo(a,e):a.body[e]=w(c,m);return}}l?t(c[0],c[1],c[2],c[3],a,e):a.body[e]=
w(c)})}return a}function B(a,b,c,d){for(var g=!a.el;c&&c._node.removed;)c=c.nextSibling;g&&h(a.vm,"willMount",a.vm);if(a.type==f.TYPE_ELEM)if(g&&(a.el=b||(a.ns?G.createElementNS(P[a.ns],a.tag):G.createElement(a.tag)),a.props&&E(a)),f.isArr(a.body)){b=0;for(var e=a.el.firstChild;b<a.body.length;b++)e=B(a.body[b],null,e)}else f.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:g&&(a.el.textContent=a.body));else a.type==f.TYPE_TEXT&&g&&(a.el=G.createTextNode(a.body));a.el._node=a;b=a.parent;c!==a.el&&(d||
b&&b.el)&&(b=g?"Insert":"Reinsert",h(a,"will"+b,a),(d||a.parent.el).insertBefore(a.el,c),h(a,"did"+b,a));g&&a.vm&&a.vm.hooks&&!a.moved&&h(a.vm,"didMount",a.vm);return c!==a.el?c:c.nextSibling}function O(a,b,c,d,g){var e=f.isArr(a),l=e?y(a[1],a[2]):a.key,k=c.hasKeys,m=b.hasKeys;c=c.body;b=b.body;if(null!==l&&k)return a=f.keyedIdx(l,c,e?a[0]:null),-1<a?[a,2]:null;d=d||0;if(d>c.length-1)return null;g=0===g?0:g||c.length-1;for(l=null;d<=g;d++)if(k=c[d],null!==k&&k.el)if(e&&k.vm){if(k.vm.view[0]===a[0]){if(k.vm.view[1]===
y(a[1],a[2]))return[d,2];!l&&m&&-1==f.keyedIdx(k.key,b,k.vm.view[0])&&(l=[d,1])}}else if(a.type===k.type&&(a.type===f.TYPE_TEXT||null!==a.tag&&a.tag===k.tag)&&(null===k.key||!m||-1==f.keyedIdx(k.key,b,k.vm?k.vm.view[0]:null)))return[d,1];return l}function J(a,b){if(a&&a.diff&&b.diff&&a.diff[0]===b.diff[0]){var c=a.diff.slice(1).concat(b.diff.slice(1));return!b.diff[0].apply(null,c)}return!1}function N(a,b){if(a.el)if(b.el=a.el,a.el=null,b.el&&(b.el._node=b),b.type===f.TYPE_TEXT&&b.body!==a.body)b.el.nodeValue=
b.body;else{E(b,a);var c=!f.isArr(b.body),d=!f.isArr(a.body);c&&b.body!==a.body?d&&b.el.firstChild?b.el.firstChild.nodeValue=b.body:b.raw?b.el.innerHTML=b.body:b.el.textContent=b.body:d&&!c&&(b.el.textContent="");a.moved=!0}}function Q(a,b,c,d){return function(c){var e,l=c.target._node,k=null;if(f.isFunc(a))e=a.call(b,c,l,d);else if(f.isArr(a))k=a.slice(1),e=a[0].apply(b,k.concat(c,l,d));else if(f.isObj(a))for(var m in a){var h=a[m];null!=h&&"_"!=m[0]&&c.target.matches(m)&&(f.isArr(h)?(k=h.slice(1),
e=h[0].apply(b,k.concat(c,l,d))):f.isFunc(h)&&(e=h.call(b,c,l,d)))}!1===e&&(c.preventDefault(),c.stopPropagation());d.opts.hasOwnProperty("watch")&&d.opts.watch.fire({type:"event",vm:d,node:l,event:c,data:k})}}function E(a,b){var c=!b;b=b||{};if(b.props||a.props){var d=b.props||{},g=a.props||{},e=d.style,l=g.style;if(f.isObj(e)||f.isObj(l))L(a.el,a.tag,e||{},l||{},R,S,a.ns,c,a),d.style=g.style=null;L(a.el,a.tag,d,g,T,M,a.ns,c,a);l&&(g.style=l)}}function L(a,b,c,d,g,e,l,k,m){for(var h in d)if(b=d[h],
null!==b){var p="."===h[0]?a[h.substr(1)]:c[h];b===p||f.isArr(b)&&f.isArr(p)&&f.cmpArr(b,p)||g(a,h,b,l,k,m)}for(h in c)null!==c[h]&&null==d[h]&&e(a,h,l,k)}function R(a,b,c){a.style[b]=f.autoPx(b,c)}function S(a,b){a.style[b]=""}function T(a,b,c,d,g,e){if("."===b[0])b=b.substr(1),"svg"===d?a[b].baseVal=c:a[b]=c;else if("class"===b)a.className=c;else if("id"===b)a[b]=c;else if(f.isEvProp(b)){for(d=e;!d.vm;)d=d.parent;a[b]=Q(c,d.vm.opts.evctx||d.vm.model||null,e,d.vm)}else!1===c?M(a,b,d,g):a.setAttribute(b,
!0===c?"":c)}function M(a,b,c,d){d||("."===b[0]?(b=b.substr(1),"svg"===c?a[b].baseVal=null:a[b]=null):"class"===b?a.className="":"id"===b||f.isEvProp(b)?a[b]=null:a.removeAttribute(b))}var P={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},G="undefined"==typeof document?{}:document,K={},F=[],C=[],I=[],D={useRaf:!0};u.view=t;u.view.config=function(a){D=a};var A=null;u.view.extend=function(a,b){A=!A||b?[]:A;A.push(a)};var f=u.utils;return u})(domvm);
